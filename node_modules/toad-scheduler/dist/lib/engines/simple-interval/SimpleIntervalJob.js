"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.SimpleIntervalJob = void 0;
const Job_1 = require("../../common/Job");
const SimpleIntervalSchedule_1 = require("./SimpleIntervalSchedule");
class SimpleIntervalJob extends Job_1.Job {
    constructor(schedule, task) {
        super();
        this.schedule = schedule;
        this.task = task;
    }
    start() {
        const time = SimpleIntervalSchedule_1.toMsecs(this.schedule);
        // Avoid starting duplicates and leaking previous timers
        if (this.timer) {
            this.stop();
        }
        this.timer = setInterval(() => {
            this.task.execute();
        }, time);
    }
    stop() {
        if (!this.timer) {
            return;
        }
        clearInterval(this.timer);
        this.timer = undefined;
    }
}
exports.SimpleIntervalJob = SimpleIntervalJob;
